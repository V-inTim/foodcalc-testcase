# Тестовое задание Калькулятор калорий
## Описание
REST API сервис для отслеживания дневной нормы калорий пользователя и учета съеденных блюд.

### Требования:
1. Добавление пользователей с параметрами
На основе данных автоматически рассчитать дневную норму калорий (можно использовать формулу Харриса-Бенедикта).
2. Блюда. Добавление блюд с параметрами
3. Прием пищи. Пользователь может добавлять прием пищи со списком блюд
4. Отчеты (эндпоинты, без формирования документа)



### Нефункциональные требования:

- использовать Spring Boot + Spring Data JPA;
- база данных PostgreSQL;
- валидация входных данных (например, проверка веса и роста на адекватность);
- написать юнит-тесты для основной логики;
- реализовать обработку ошибок (например, если пользователь не найден).

## Запуск
Запуск в консоли
- Минимальная версия JDK - 17
- Во время сборки бд должно быть доступно. Потому что во время сборки запускаются тесты. А главный тест проверяет связь с бд.
- Сборка и запуск в основной директории.
- Добавлен плагин для сборки с зависимостями.
```java
mvn clean package // сборка
java -jar target/original-foodcalc-0.0.1-SNAPSHOT.jar // запуск
```

## API
### /foodcalc/user
post-запрос на создание пользователя

Тело запроса:
```json
{
"name": "",
"email": "",
"age": 17,
"gender": "FEMALE", // FEMALE или MALE
"height": 1,
"weight": 8,
"purpose": "WEIGHT_LOSS" // WEIGHT_LOSS, WEIGHT_MAINTENANCE или WEIGHT_GAIN
}
```

Тело ответа:
```json
{
  "userId": 7,
  "dailyNorm": 1921
}
```

### /foodcalc/dish
post-запрос на добавление блюда

Тело запроса:
```json
{
  "name": "potato",
  "caloriesPerServing": 200,
  "pfc": {
    "proteins": 20,
    "fats": 10,
    "carbohydrates": 30
  }
}
```

Тело ответа:
```json
{
  "dishId": 12
}
```

### /foodcalc/user/<user-id>/meal
post-запрос на добавление приема пищи

Тело запроса:
```json
{
  "dishes": [11] // список id блюд
}
```

Тело ответа:
```json
{
  "mealId": 4
}
```

### /foodcalc/user/<user-id>/report
get-запрос на получение отчета за день

Параметры: \
date - необязательный

Тело ответа:
```json
{
  "dailyCalories": 200
}
```

### /foodcalc/user/<user-id>/check
get-запрос на проверку нормы за день

Параметры: \
date - необязательный

Тело ответа:
```json
{
  "inNorm": true
}
```

### /foodcalc/user/<user-id>/check
get-запрос на историю приемов пищи

Тело ответа:
```json
{
  "history": {
    "2025-03-20": [
      {
        "id": 1,
        "calories": 600,
        "dishes": [
          {
            "id": 5,
            "name": "potato",
            "caloriesPerServing": 200,
            "pfc": {
              "proteins": 0,
              "fats": 0,
              "carbohydrates": 0
            }
          }
        ]
      }
    ]
  }
}
```

## Заметки
- Вся функциональность релизована
- Добавлены логи
- Postgres запускается в docker-compose
- Параметры подключения к бд в рамках тестового не выделял в отдельный файл
- Тесты с проверкой логики сервисов написаны
- Валидация в dto минимально добавлена
- Добавлены миграции liquibase для работы с бд
- Жду обратной связи)